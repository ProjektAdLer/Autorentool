@using Microsoft.Extensions.Localization
@using Shared
<MudItem>
    <MudCard Outlined="true" Elevation="1" Class="w-60 h-40">
        <MudCardHeader Class="flex justify-center items-center break-word w-full">
            <CardHeaderContent>
                <MudText Class="break-all">
                    @LearningWorldPath!.Name
                </MudText>
            </CardHeaderContent>
            <CardHeaderActions>
                <MudFab @onclick="OnCloseButtonPressed" Size="Size.Small" StartIcon="@Icons.Material.Filled.Close"
                        Title=@Localizer["LearningWorldCard.Button.Close.Text"] DisableElevation="true"/>
            </CardHeaderActions>
        </MudCardHeader>
        <MudCardContent Class="flex justify-center">
            <MudButton Size="Size.Large" @onclick="@(() => OnOpenLearningWorld.InvokeAsync(LearningWorldPath))">
                @Localizer["LearningWorldCard.Button.Open.Text"]
            </MudButton>
        </MudCardContent>
    </MudCard>
</MudItem>

@code {

    [Inject]
    private IStringLocalizer<LearningWorldCard> Localizer { get; set; }

    [Parameter]
    public SavedLearningWorldPath? LearningWorldPath { get; set; }

    [Parameter]
    public EventCallback<SavedLearningWorldPath> OnOpenLearningWorld { get; set; }

    [Parameter, EditorRequired]
    public EventCallback<SavedLearningWorldPath> OnCloseWorld { get; set; }


    protected override void OnParametersSet()
    {
        base.OnParametersSet();
        if (!OnOpenLearningWorld.HasDelegate) throw new ApplicationException(Localizer["ApplicationException.OnOpenLearningWorld.Message"]);
        if (LearningWorldPath == null) throw new ApplicationException(Localizer["ApplicationException.LearningWorldPath.Message"]);
        if (!OnCloseWorld.HasDelegate) throw new ApplicationException(Localizer["ApplicationException.OnCloseWorld.Message"]);
    }

    private void OnCloseButtonPressed()
    {
        OnCloseWorld.InvokeAsync(LearningWorldPath);
    }

}