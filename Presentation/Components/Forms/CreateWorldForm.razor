@using Presentation.Components.Forms.Models
@using Presentation.PresentationLogic.API
@using Presentation.PresentationLogic.AuthoringToolWorkspace
<BaseForm T="WorldFormModel" @ref="_form" OnValidSubmit="OnValidSubmit" SnackbarMessage="World created">
    <MudTextField @bind-Value="Model.Name"
                  For="@(() => Model.Name)"
                  Immediate="true"
                  DebounceInterval="300"
                  Label="@nameof(Model.Name)"/>
    <MudTextField @bind-Value="Model.Shortname"
                  For="@(() => Model.Shortname)"
                  Immediate="true"
                  DebounceInterval="300"
                  Label="@nameof(Model.Shortname)"/>
    <MudTextField @bind-Value="Model.Authors"
                  For="@(() => Model.Authors)"
                  Immediate="true"
                  DebounceInterval="300"
                  Label="@nameof(Model.Authors)"/>
    <MudTextField @bind-Value="Model.Language"
                  For="@(() => Model.Language)"
                  Immediate="true"
                  DebounceInterval="300"
                  Label="@nameof(Model.Language)"/>
    <MudTextField @bind-Value="Model.Description"
                  For="@(() => Model.Description)"
                  Immediate="true"
                  DebounceInterval="300"
                  Label="@nameof(Model.Description)"/>
    <MudTextField @bind-Value="Model.Goals"
                  For="@(() => Model.Goals)"
                  Immediate="true"
                  DebounceInterval="300"
                  Label="@nameof(Model.Goals)"/>
</BaseForm>
@code {
#pragma warning disable CS8618 - injected by framework - n.stich
    [Inject]
    private IPresentationLogic PresentationLogic { get; set; }
    [Inject]
    private IAuthoringToolWorkspaceViewModel AuthoringToolWorkspaceViewModel { get; set; }
#pragma warning restore CS8618

    private BaseForm<WorldFormModel> _form;
    private WorldFormModel Model => _form.Model;

    private void OnValidSubmit(WorldFormModel model)
    {
        PresentationLogic.CreateWorld(AuthoringToolWorkspaceViewModel, model.Name, model.Shortname,
            model.Authors, model.Language, model.Description, model.Goals);
    }
}